# Server

The Doclific server is a Go-based HTTP server that provides a REST API for managing documentation and serves the web frontend. It handles API requests, serves static files, and manages CORS.

## Server Initialization

The server is started using the `StartServer` function, which sets up routing, static file serving, and opens the browser automatically.

<CodebaseSnippet filePath="internal/server/server.go" lineStart="35" lineEnd="100">

</CodebaseSnippet>

## Route Registration

All API routes are registered using REST conventions in the `RegisterRoutes` function. The server provides endpoints for:

* **Update**: Version checking
* **Git**: Repository information
* **Docs**: Document management (CRUD operations)
* **Codebase**: File and folder browsing
* **AI**: Rich text generation

<CodebaseSnippet filePath="internal/server/handlers.go" lineStart="13" lineEnd="36">

</CodebaseSnippet>

## CORS Middleware

The server includes CORS middleware that allows cross-origin requests from any origin, which is useful for development and local usage.

<CodebaseSnippet filePath="internal/server/server.go" lineStart="15" lineEnd="33">

</CodebaseSnippet>

## Static File Serving

The server serves the built frontend application and handles SPA routing by serving `index.html` for non-API routes that don't match existing files.

<CodebaseSnippet filePath="internal/server/server.go" lineStart="48" lineEnd="68">

</CodebaseSnippet>

## Build Directory Discovery

The server uses multiple strategies to locate the frontend build directory, supporting both development and production deployments.

<CodebaseSnippet filePath="internal/server/server.go" lineStart="138" lineEnd="186">

</CodebaseSnippet>

## API Handlers

### Git Handlers

The Git handler retrieves repository information including name, branch, username, and email.

<CodebaseSnippet filePath="internal/server/handlers.go" lineStart="38" lineEnd="74">

</CodebaseSnippet>

### Documentation Handlers

The documentation handlers provide full CRUD operations for managing documentation files:

* **GET /api/docs**: List all documents
* **GET /api/docs/doc**: Get a specific document
* **PUT /api/docs/doc**: Update a document
* **POST /api/docs**: Create a new document
* **DELETE /api/docs/doc**: Delete a document
* **PUT /api/docs/order**: Update document ordering

<CodebaseSnippet filePath="internal/server/handlers.go" lineStart="76" lineEnd="176">

</CodebaseSnippet>

### Codebase Handlers

The codebase handlers allow browsing the project's file structure and reading file contents.

<CodebaseSnippet filePath="internal/server/handlers.go" lineStart="178" lineEnd="236">

</CodebaseSnippet>

### AI Handlers

The AI handler generates rich text content using AI based on a prompt.

<CodebaseSnippet filePath="internal/server/handlers.go" lineStart="238" lineEnd="256">

</CodebaseSnippet>

### Update Handlers

The update handler checks for available updates by comparing the current version with the latest version.

<CodebaseSnippet filePath="internal/server/handlers.go" lineStart="258" lineEnd="279">

</CodebaseSnippet>

## Browser Opening

The server automatically opens the default browser when it starts, with platform-specific handling for Windows, macOS, Linux, and WSL.

<CodebaseSnippet filePath="internal/server/server.go" lineStart="102" lineEnd="136">

</CodebaseSnippet>

â€‹
